/*
  # ----- Script info:
  - Author: Michael Mammoliti
  - Name: rSlider.js
  - Version: 0.2.1
  - js dipendencies: jQuery
  - Release date: 8 February 2016
  - GitHub: https://github.com/MichaelMammoliti/rSlider.js

  # ----- Contact info
  - GitHub: https://github.com/MichaelMammoliti
  - Mail: mammoliti.michael@gmail.com
  - Twitter: @MichMammoliti

  # ----- License Info
  - Released under the GPL v3 license.
*/

!function(){var t="rSlider",e={currentSlide:0,defaultSlide:0,delay:7e3,height:void 0,width:void 0,minHeight:500,automatic:!1,dirButtons:!0,dirButtonNext:"next",dirButtonPrev:"prev",transitions:!0},i=function(t,i){this.$context=$(t),this.$view=this.$context.find(".rSlider--view"),this.$slides=this.$view.find(".rSlider--slide"),this.$images=this.$slides.find(".rSlider--image"),this.$container=this.$slides.find(".rSlider--container"),this.$dotsControls=this.$context.find(".rSlider--dots-controls"),this.$arrowControls=this.$context.find(".rSlider--arrow-controls"),this.slidesLen=this.$slides.length,this.settings=$.extend(e,i),this.w=this.settings.width||this.$context.width(),this.h=this.settings.height||this.$context.height(),this.delayTimer=void 0,this.resizeTimer=void 0,this.init()},n={init:function(){var t=this;t.settings.currentSlide!==t.settings.defaultSlide&&t.setSlide(t.settings.defaultSlide),t.events(),t.setStyle(),t.startAutomaticMovement(),t.setDotsControls(),t.setArrowControls(),t.activateButton(t.settings.currentSlide),t.fixSlideHeight(),t.moveSlide(),t.setAnimations()},calculateMargin:function(){var t=this,e=-t.settings.currentSlide*t.w;return e},startAutomaticMovement:function(){var t=this,e=function(){t.goToSlide(t.nextSlide()),t.activateButton(),t.moveSlide()};t.settings.automatic&&(clearInterval(t.delayTimer),t.delayTimer=setInterval(e,t.settings.delay))},stopAutomaticMovement:function(){var t=this;clearInterval(t.delayTimer)},setStyle:function(){var t=this;t.setMetrics(),t.setBackgroundImages()},setBackgroundImages:function(){var t=this,e=t.$images.find("img"),i=function(){var t=$(this),e=t.parent(),i=t.attr("src");e.css({"background-image":"url('"+i+"')"})};$.each(e,i),e.remove()},setDotsControls:function(){var t=this,e="",i=0;$.each(t.$images,function(){e+="<button data-slide-index='"+i+"'></button>",i++}),t.$dotsControls.append(e)},setArrowControls:function(){var t=this,e="";t.settings.dirButtons&&(e+="<span><button data-dir='prev'>"+t.settings.dirButtonPrev+"</button></span>",e+="<span><button data-dir='next'>"+t.settings.dirButtonNext+"</button></span>",t.$arrowControls.append(e))},setMetrics:function(){var t=this;t.$slides.width(t.w),t.settings.height&&t.settings.width&&(t.$view.height(t.h),t.$context.width(t.w))},nextSlide:function(){var t,e=this;return t=e.settings.currentSlide+1,e.settings.currentSlide===e.slidesLen-1&&(t=0),t},prevSlide:function(){var t=this,e=t.settings.currentSlide-1;return 0===t.settings.currentSlide&&(e=t.slidesLen-1),e},setSlide:function(t){var e=this;return e.settings.currentSlide=t,t},moveSlide:function(){var t=this;t.$view.css({"margin-left":t.calculateMargin()})},goToSlide:function(t){var e=this,i=t;switch(i){case"next":i=e.nextSlide();break;case"prev":i=e.prevSlide()}return e.setSlide(i),e.fixSlideHeight(),e.settings.currentSlide},activateButton:function(t){var e=this,i=e.$dotsControls.children("button"),t=t||e.settings.currentSlide;i.removeClass("active"),i.eq(t).addClass("active")},resizeImages:function(t){var e=this;e.w=t,e.moveSlide(),e.$slides.width(t)},userEvents:{handleDotsControls:function(t){var e=this,i=t.data("slide-index");return e.goToSlide(i),e.startAutomaticMovement(),e.activateButton(),e.moveSlide(),e.settings.currentSlide},handleArrowControls:function(t){var e=this,i=t.data("dir");return e.goToSlide(i),e.startAutomaticMovement(),e.activateButton(),e.moveSlide(),e.settings.currentSlide},resizeWindow:function(){var t=this,e=t.$context.innerWidth();t.resizeImages(e),t.fixSlideHeight(),t.removeAnimations()}},fixSlideHeight:function(){var t=this,e=t.settings.currentSlide,i=t.$slides.eq(e),n=(i.find(".rSlider--image"),i.find(".rSlider--container").outerHeight()),s=t.settings.minHeight;return s>n&&(n=s),n>t.$context.outerHeight()&&(n=n),t.$slides.height(n),i.height(n),n},removeAnimations:function(){var t=this,e="css-transitions";t.$context.removeClass(e),clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(t.setAnimations.bind(t),500)},setAnimations:function(){var t=this,e="css-transitions";t.settings.transitions&&t.$context.addClass(e)},events:function(){var t=this;t.$dotsControls.on("click","button",function(){var e=$(this);t.userEvents.handleDotsControls.call(t,e)}),t.$arrowControls.on("click","span",function(){var e=$(this).children("button");t.userEvents.handleArrowControls.call(t,e)}),$(window).on("resize",t.userEvents.resizeWindow.bind(t)),t.$context.on("mouseover",t.stopAutomaticMovement.bind(t)),t.$context.on("mouseleave",t.startAutomaticMovement.bind(t))}};$.extend(i.prototype,n),$.fn[t]=function(t){return $.each($(this),function(){return new i(this,t)})},$(".rSlider").rSlider()}();